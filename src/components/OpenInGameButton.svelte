<script lang="ts">
	import { getContext } from 'svelte';
	import type { AppState } from '$types';
	import type { ArmyModel } from '$models';
	import { openInGame, getOpenBtnTitle } from '$client/army';

	type Props = {
		model: ArmyModel;
		size?: 'regular' | 'large';
	};
	const { model, size = 'regular' }: Props = $props();
	const app = getContext<AppState>('app');
</script>

<button class="utility-btn {size}" onclick={() => openInGame(model, app)} title={getOpenBtnTitle(model)}>
	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 12">
		<path
			d="M11.7441 0C12.5724 0 13.2082 0.63225 13.6792 1.3125L13.8387 1.55325L13.9847 1.79325C14.0312 1.87175 14.0756 1.94875 14.118 2.02425C14.7074 3.0795 15.2203 4.45725 15.5596 5.8185C15.8966 7.16925 16.083 8.58 15.964 9.68925C15.8441 10.803 15.2713 12 13.9907 12C12.842 12 11.9366 11.385 11.2012 10.7843L10.37 10.086C9.67879 9.519 8.92245 9 7.99985 9C7.07726 9 6.32017 9.519 5.63047 10.086L4.79924 10.7835C4.06236 11.385 3.15699 12 2.00899 12C0.727696 12 0.15482 10.803 0.0357513 9.68925C-0.0825683 8.57925 0.103148 7.16925 0.440134 5.8185C0.779367 4.45725 1.29233 3.0795 1.88169 2.02425L2.01498 1.7925L2.16101 1.55325L2.32052 1.3125C2.79155 0.63225 3.42733 0 4.25557 0C4.63748 0 5.01715 0.093 5.39008 0.2025L5.83416 0.339C5.90755 0.3615 5.98043 0.383 6.05282 0.4035C6.70059 0.5895 7.36332 0.75 7.99985 0.75C8.63638 0.75 9.29912 0.5895 9.94688 0.4035L10.6096 0.20325C10.9826 0.0929999 11.3622 0 11.7441 0ZM5.37885 3C4.88233 3 4.40614 3.19754 4.05505 3.54917C3.70395 3.90081 3.50671 4.37772 3.50671 4.875C3.50671 5.37228 3.70395 5.84919 4.05505 6.20083C4.40614 6.55246 4.88233 6.75 5.37885 6.75C5.87538 6.75 6.35156 6.55246 6.70266 6.20083C7.05375 5.84919 7.251 5.37228 7.251 4.875C7.251 4.37772 7.05375 3.90081 6.70266 3.54917C6.35156 3.19754 5.87538 3 5.37885 3ZM10.6209 3C10.4222 3 10.2318 3.07902 10.0913 3.21967C9.9509 3.36032 9.872 3.55109 9.872 3.75V4.125H9.49757C9.29896 4.125 9.10849 4.20402 8.96805 4.34467C8.82761 4.48532 8.74871 4.67609 8.74871 4.875C8.74871 5.07391 8.82761 5.26468 8.96805 5.40533C9.10849 5.54598 9.29896 5.625 9.49757 5.625H9.872V6C9.872 6.19891 9.9509 6.38968 10.0913 6.53033C10.2318 6.67098 10.4222 6.75 10.6209 6.75C10.8195 6.75 11.0099 6.67098 11.1504 6.53033C11.2908 6.38968 11.3697 6.19891 11.3697 6V5.625H11.7441C11.9428 5.625 12.1332 5.54598 12.2737 5.40533C12.4141 5.26468 12.493 5.07391 12.493 4.875C12.493 4.67609 12.4141 4.48532 12.2737 4.34467C12.1332 4.20402 11.9428 4.125 11.7441 4.125H11.3697V3.75C11.3697 3.55109 11.2908 3.36032 11.1504 3.21967C11.0099 3.07902 10.8195 3 10.6209 3ZM5.37885 4.5C5.47816 4.5 5.57339 4.53951 5.64361 4.60983C5.71383 4.68016 5.75328 4.77554 5.75328 4.875C5.75328 4.97446 5.71383 5.06984 5.64361 5.14017C5.57339 5.21049 5.47816 5.25 5.37885 5.25C5.27955 5.25 5.18431 5.21049 5.11409 5.14017C5.04387 5.06984 5.00442 4.97446 5.00442 4.875C5.00442 4.77554 5.04387 4.68016 5.11409 4.60983C5.18431 4.53951 5.27955 4.5 5.37885 4.5Z"
			fill="currentColor"
		/>
	</svg>
	Open
</button>
